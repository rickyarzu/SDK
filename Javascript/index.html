<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Motonave Trinacria</title>

<script type="text/javascript">
var XMLHttp
var colore

  function done() {
	 colore = '#FFFF00';
	 document.bgColor=colore; 
	 document.getElementById("input").value = ""; 
	 document.getElementById("input").focus(); 
  }

function createXMLHttpRequest() {

  if (window.ActiveXObject) {
	  xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");  
	  
  }
  else if (window.XMLHttpRequest) {
	xmlHttp = new XMLHttpRequest  
  }

}

function checkRequest () {
  var stringa = document.getElementById("input").value.toUpperCase();  
  var carattere = stringa.substring(stringa.length - 1, stringa.length); 
  document.getElementById("output").value = carattere; 
  if (carattere == ".")  { startRequest() };
  
}


function startRequest() {
	
	document.getElementById("numero").innerHTML = document.getElementById("input").value.toUpperCase();  
	document.getElementById("cliente").innerHTML = "Riccardo Arduino";
	createXMLHttpRequest();
	xmlHttp.onreadystatechange = handleStateChange;
	
	xmlHttp.open("GET", "innerHTML.xml?numero=123456", true);
	
	document.getElementById("input").value = ""; 
	if (colore == '#FF0000') {colore = '#FFFF00'};
	if (colore == '#FFFF00') { colore = '#00FF00'} 
	    else if (colore = '#00FF00') {colore =  '#FF0000'} ;
		
	document.bgColor=colore; 
	document.getElementById("input").focus();
	
	
 <!--		if (colore = red) { colore = lime } else { colore = red}; -->
	

	
	xmlHttp.send(null);	
	
	
	
}

function handleStateChange() {
  <!--	window.alert(xmlHttp.readyState); -->
    if (xmlHttp.readyState == 4) {
	
  <!--	window.alert(xmlHttp.status); -->	
		if (xmlHttp.status == 200) {
			document.getElementById("results").innerHTML = xmlHttp.responseText;
			document.getElementById("input").focus();
		}
		
	}
	
}

</script>



</head>

<body onload="done()">

<div id="container" style=" height:100%">


 <form>
 
  <input type="text" name="input" id="input" value="" onkeyup="checkRequest()" onchange="startRequest()" style="width:120px"  />
 
 <input type="button" value="Click Me" onclick="startRequest()" />
 
  <input type="text" name="output" id="output" value=""  style="width:20px"  />
 
 <span id="carattere"> </span>
 
 </form>
 
 <p>
 
<b>  Polizza NÂ°: <span id = "numero">  </span> </b>  <br />
<b>  Cliente: <span id = "cliente">    </span> </b> <br />
<span id="results"> </span>
 
 </p>
 
</div>

</body>
</html>
